{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/DermaDetect/DermaDetect/legion/src/app/analyze/page.js"],"sourcesContent":["\"use client\";\nimport { useState, useRef } from \"react\";\n\nexport default function DetectPage() {\n\tconst [image, setImage] = useState(null);\n\tconst [imagePreview, setImagePreview] = useState(null);\n\tconst [result, setResult] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(null);\n\tconst [dragActive, setDragActive] = useState(false);\n\tconst inputRef = useRef(null);\n\n\t// Class information mapping\n\tconst classInfo = {\n\t\takiec: {\n\t\t\tfullName: \"Actinic Keratoses and Intraepithelial Carcinoma (Bowen's disease)\",\n\t\t\tdescription: \"Precancerous or cancerous lesions, often scaly or rough.\"\n\t\t},\n\t\tbcc: {\n\t\t\tfullName: \"Basal Cell Carcinoma\",\n\t\t\tdescription: \"Most common type of skin cancer, usually slow-growing.\"\n\t\t},\n\t\tbkl: {\n\t\t\tfullName: \"Benign Keratosis-like Lesions\",\n\t\t\tdescription: \"Includes seborrheic keratoses, lichenoid keratoses, and solar lentigines (benign, non-cancerous).\"\n\t\t},\n\t\tdf: {\n\t\t\tfullName: \"Dermatofibroma\",\n\t\t\tdescription: \"Benign fibrous skin nodule.\"\n\t\t},\n\t\tmel: {\n\t\t\tfullName: \"Melanoma\",\n\t\t\tdescription: \"Dangerous skin cancer that can spread rapidly.\"\n\t\t},\n\t\tnv: {\n\t\t\tfullName: \"Melanocytic Nevus\",\n\t\t\tdescription: \"Mole (benign proliferation of melanocytes).\"\n\t\t},\n\t\tvasc: {\n\t\t\tfullName: \"Vascular Lesion\",\n\t\t\tdescription: \"Includes angiomas, hemangiomas, and pyogenic granulomas (benign blood vessel growths).\"\n\t\t}\n\t};\n\n\tconst handleImageChange = (e) => {\n\t\tconst file = e.target.files[0];\n\t\tif (file) {\n\t\t\tsetImage(file);\n\t\t\tsetImagePreview(URL.createObjectURL(file));\n\t\t\tsetResult(null);\n\t\t\tsetError(null);\n\t\t}\n\t};\n\n\tconst handleDragOver = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetDragActive(true);\n\t};\n\n\tconst handleDragLeave = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetDragActive(false);\n\t};\n\n\tconst handleDrop = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetDragActive(false);\n\t\tif (e.dataTransfer.files && e.dataTransfer.files[0]) {\n\t\t\tsetImage(e.dataTransfer.files[0]);\n\t\t\tsetImagePreview(URL.createObjectURL(e.dataTransfer.files[0]));\n\t\t\tsetResult(null);\n\t\t\tsetError(null);\n\t\t}\n\t};\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tif (!image) return;\n\t\tsetLoading(true);\n\t\tsetError(null);\n\t\tsetResult(null);\n\t\ttry {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"image\", image);\n\t\t\tconst res = await fetch(\"../api/analyze\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: formData,\n\t\t\t});\n\t\t\tif (!res.ok) throw new Error(\"API error\");\n\t\t\tconst data = await res.json();\n\t\t\tsetResult(data);\n\t\t} catch (err) {\n\t\t\tsetError(err.message);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"analyze-card\" style={{ maxWidth: \"100vw\", minHeight: \"70vh\", padding: \"2rem\" }}>\n\t\t\t<div style={{ padding: \"10px\", fontSize: \"30px\", display: \"flex\", justifyContent: \"center\", paddingBottom: \"50px\" }}>\n\t\t\t\tImage Detection\n\t\t\t</div>\n\t\t\t<div className=\"analysis-container\">\n\t\t\t\t<div>\n\t\t\t\t\t<form onSubmit={handleSubmit} style={{ marginBottom: \"2rem\" }}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonDragOver={handleDragOver}\n\t\t\t\t\t\t\tonDragLeave={handleDragLeave}\n\t\t\t\t\t\t\tonDrop={handleDrop}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tborder: imagePreview ? \"none\" : (dragActive ? \"2px solid var(--button-bg)\" : \"2px dashed var(--border-color)\"),\n\t\t\t\t\t\t\t\tborderRadius: 8,\n\t\t\t\t\t\t\t\tpadding: imagePreview ? \"0\" : \"2rem\",\n\t\t\t\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\t\t\t\tbackground: imagePreview ? \"transparent\" : (dragActive ? \"rgba(25, 118, 210, 0.1)\" : \"var(--card-bg)\"),\n\t\t\t\t\t\t\t\tmarginBottom: \"1rem\",\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\t\t\tminHeight: imagePreview ? \"auto\" : \"150px\",\n\t\t\t\t\t\t\t\tminWidth: \"36vw\",\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\t\tjustifyContent: \"center\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => inputRef.current && inputRef.current.click()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{imagePreview ? (\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc={imagePreview} \n\t\t\t\t\t\t\t\t\talt=\"Selected\" \n\t\t\t\t\t\t\t\t\tstyle={{ \n\t\t\t\t\t\t\t\t\t\tmaxWidth: \"100%\", \n\t\t\t\t\t\t\t\t\t\tmaxHeight: \"300px\", \n\t\t\t\t\t\t\t\t\t\tobjectFit: \"contain\",\n\t\t\t\t\t\t\t\t\t\tborderRadius: 8\n\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span style={{ color: \"var(--foreground)\", fontWeight: \"500\" }}>\n\t\t\t\t\t\t\t\t\tDrag & drop an image here, or click to select\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t\tonChange={handleImageChange}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttype=\"submit\" \n\t\t\t\t\t\t\tdisabled={loading || !image} \n\t\t\t\t\t\t\tstyle={{ \n\t\t\t\t\t\t\t\tmarginLeft: \"1rem\",\n\t\t\t\t\t\t\t\tbackground: \"var(--button-bg)\",\n\t\t\t\t\t\t\t\tcolor: \"var(--button-text)\",\n\t\t\t\t\t\t\t\tborder: \"none\",\n\t\t\t\t\t\t\t\tpadding: \"0.5rem 1rem\",\n\t\t\t\t\t\t\t\tborderRadius: \"4px\",\n\t\t\t\t\t\t\t\tcursor: loading || !image ? \"not-allowed\" : \"pointer\",\n\t\t\t\t\t\t\t\topacity: loading || !image ? 0.6 : 1\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{loading ? \"Analyzing...\" : \"Analyze\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t{error && <div style={{ color: \"#d32f2f\" }}>Error: {error}</div>}\n\t\t\t\t<div className=\"result-card\">\n\t\t\t\t\t<h3>Result</h3>\n\t\t\t\t\t{result ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div><strong>Prediction:</strong> {result.prediction}</div>\n\t\t\t\t\t\t\t{classInfo[result.prediction] && (\n\t\t\t\t\t\t\t\t<div className=\"class-info-card\">\n\t\t\t\t\t\t\t\t\t<div><strong>Full Name:</strong> {classInfo[result.prediction].fullName}</div>\n\t\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}><strong>Description:</strong> {classInfo[result.prediction].description}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div><strong>Class Index:</strong> {result.class_idx}</div>\n\t\t\t\t\t\t\t<div><strong>Confidence:</strong> {result.confidence !== undefined ? `${(parseFloat(result.confidence) * 100).toFixed(2)}%` : ''}</div>\n\t\t\t\t\t\t\t<div style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t\t\t\t<strong>Class Probabilities:</strong>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t{result.class_probabilities && Object.entries(result.class_probabilities).map(([cls, prob]) => {\n\t\t\t\t\t\t\t\t\t\tlet percent = 0;\n\t\t\t\t\t\t\t\t\t\tif (typeof prob === 'string' || typeof prob === 'number') {\n\t\t\t\t\t\t\t\t\t\t\tpercent = (parseFloat(prob) * 100);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst display = `${percent.toFixed(2)}%`;\n\t\t\t\t\t\t\t\t\t\treturn <li key={cls}>{cls}: {display}</li>;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div style={{ color: \"var(--text-muted)\", fontStyle: \"italic\" }}>\n\t\t\t\t\t\t\tUpload an image and click \"Analyze\" to see results here.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}"],"names":[],"mappings":"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","debugId":null}}]
}