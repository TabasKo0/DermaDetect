{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/shiii/acm/legion/src/app/analyze/page.js"],"sourcesContent":["\r\n\"use client\";\r\nimport { useState, useRef } from \"react\";\r\n\r\nexport default function DetectPage() {\r\n\tconst [image, setImage] = useState(null);\r\n\tconst [imagePreview, setImagePreview] = useState(null);\r\n\tconst [result, setResult] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState(null);\r\n\tconst [dragActive, setDragActive] = useState(false);\r\n\tconst inputRef = useRef(null);\r\n\r\n\t// Class information mapping\r\n\tconst classInfo = {\r\n\t\takiec: {\r\n\t\t\tfullName: \"Actinic Keratoses and Intraepithelial Carcinoma (Bowen's disease)\",\r\n\t\t\tdescription: \"Precancerous or cancerous lesions, often scaly or rough.\"\r\n\t\t},\r\n\t\tbcc: {\r\n\t\t\tfullName: \"Basal Cell Carcinoma\",\r\n\t\t\tdescription: \"Most common type of skin cancer, usually slow-growing.\"\r\n\t\t},\r\n\t\tbkl: {\r\n\t\t\tfullName: \"Benign Keratosis-like Lesions\",\r\n\t\t\tdescription: \"Includes seborrheic keratoses, lichenoid keratoses, and solar lentigines (benign, non-cancerous).\"\r\n\t\t},\r\n\t\tdf: {\r\n\t\t\tfullName: \"Dermatofibroma\",\r\n\t\t\tdescription: \"Benign fibrous skin nodule.\"\r\n\t\t},\r\n\t\tmel: {\r\n\t\t\tfullName: \"Melanoma\",\r\n\t\t\tdescription: \"Dangerous skin cancer that can spread rapidly.\"\r\n\t\t},\r\n\t\tnv: {\r\n\t\t\tfullName: \"Melanocytic Nevus\",\r\n\t\t\tdescription: \"Mole (benign proliferation of melanocytes).\"\r\n\t\t},\r\n\t\tvasc: {\r\n\t\t\tfullName: \"Vascular Lesion\",\r\n\t\t\tdescription: \"Includes angiomas, hemangiomas, and pyogenic granulomas (benign blood vessel growths).\"\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleImageChange = (e) => {\r\n\t\tconst file = e.target.files[0];\r\n\t\tif (file) {\r\n\t\t\tsetImage(file);\r\n\t\t\tsetImagePreview(URL.createObjectURL(file));\r\n\t\t\tsetResult(null);\r\n\t\t\tsetError(null);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDragOver = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetDragActive(true);\r\n\t};\r\n\r\n\tconst handleDragLeave = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetDragActive(false);\r\n\t};\r\n\r\n\tconst handleDrop = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetDragActive(false);\r\n\t\tif (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n\t\t\tsetImage(e.dataTransfer.files[0]);\r\n\t\t\tsetImagePreview(URL.createObjectURL(e.dataTransfer.files[0]));\r\n\t\t\tsetResult(null);\r\n\t\t\tsetError(null);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!image) return;\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\tsetResult(null);\r\n\t\ttry {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append(\"image\", image);\r\n\t\t\tconst res = await fetch(\"../api/analyze\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tbody: formData,\r\n\t\t\t});\r\n\t\t\tif (!res.ok) throw new Error(\"API error\");\r\n\t\t\tconst data = await res.json();\r\n\t\t\tsetResult(data);\r\n\t\t} catch (err) {\r\n\t\t\tsetError(err.message);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t   return (\r\n\t\t   <div style={{ maxWidth: \"100vw\",minHeight: \"70vh\", padding: \"2rem\", background: \"#fff\", borderRadius: 8, boxShadow: \"0 2px 8px rgba(0,0,0,0.06)\" }}>\r\n\t\t\t   <div style={{padding:\"10px\",fontSize:\"30px\",display:\"flex\",justifyContent:\"center\",paddingBottom:\"50px\"}}>Image Detection</div>\r\n               <div className=\"analysis-container\">\r\n\t\t\t   <div >\r\n                    <form onSubmit={handleSubmit} style={{ marginBottom: \"2rem\" }}>\r\n                        <div\r\n                            onDragOver={handleDragOver}\r\n                            onDragLeave={handleDragLeave}\r\n                            onDrop={handleDrop}\r\n                            style={{\r\n                                border: imagePreview ? \"none\" : (dragActive ? \"2px solid #1976d2\" : \"2px dashed #aaa\"),\r\n                                borderRadius: 8,\r\n                                padding: imagePreview ? \"0\" : \"2rem\",\r\n                                textAlign: \"center\",\r\n                                background: imagePreview ? \"transparent\" : (dragActive ? \"#e3f2fd\" : \"#f8f9fa\"),\r\n                                marginBottom: \"1rem\",\r\n                                cursor: \"pointer\",\r\n                                position: \"relative\",\r\n                                minHeight: imagePreview ? \"auto\" : \"150px\",\r\n\t\t\t\t\t\t\t\tminWidth: \"36vw\",\r\n                                display: \"flex\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\"\r\n                            }}\r\n                            onClick={() => inputRef.current && inputRef.current.click()}\r\n                        >\r\n                            {imagePreview ? (\r\n                                <img \r\n                                    src={imagePreview} \r\n                                    alt=\"Selected\" \r\n                                    style={{ \r\n                                        maxWidth: \"100%\", \r\n                                        maxHeight: \"300px\", \r\n                                        objectFit: \"contain\",\r\n                                        borderRadius: 8\r\n                                    }} \r\n                                />\r\n                            ) : (\r\n                                <span style={{ color: \"#333\", fontWeight: \"500\" }}>Drag & drop an image here, or click to select</span>\r\n                            )}\r\n                            <input\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                onChange={handleImageChange}\r\n                                ref={inputRef}\r\n                                style={{ display: \"none\" }}\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" disabled={loading || !image} style={{ marginLeft: \"1rem\" }}>\r\n                            {loading ? \"Analyzing...\" : \"Analyze\"}\r\n                        </button>\r\n                    </form>\r\n               </div>\r\n\t\t\t   {error && <div style={{ color: \"#d32f2f\" }}>Error: {error}</div>}\r\n\t\t\t   <div style={{ background: \"#f8f9fa\", padding: \"1rem\", borderRadius: 6, minWidth: \"36vw\",}}>\r\n\t\t\t\t   <h3>Result</h3>\r\n\t\t\t\t   {result ? (\r\n\t\t\t\t\t   <>\r\n\t\t\t\t\t\t   \r\n\t\t\t\t\t\t   {classInfo[result.prediction] && (\r\n\t\t\t\t\t\t\t   <div style={{ margin: \"1rem\", padding: \"1rem\", background: \"#e8f5e8\", borderRadius: 4, border: \"1px solid #4caf50\" }}>\r\n\t\t\t\t\t\t\t\t   <div><strong>Full Name:</strong> {classInfo[result.prediction].fullName}</div>\r\n\t\t\t\t\t\t\t\t   <div style={{ marginTop: \"0.5rem\" }}><strong>Description:</strong> {classInfo[result.prediction].description}</div>\r\n\t\t\t\t\t\t\t   </div>\r\n\t\t\t\t\t\t   )}<div><strong>Prediction:</strong> {result.prediction}</div>\r\n\t\t\t\t\t\t   <div><strong>Class Index:</strong> {result.class_idx}</div>\r\n\t\t\t\t\t\t   <div><strong>Confidence:</strong> {result.confidence !== undefined ? `${(parseFloat(result.confidence) * 100).toFixed(2)}%` : ''}</div>\r\n\t\t\t\t\t\t   <div style={{ marginTop: \"1rem\" }}>\r\n\t\t\t\t\t\t\t   <strong>Class Probabilities:</strong>\r\n\t\t\t\t\t\t\t   <ul>\r\n\t\t\t\t\t\t\t\t\t{result.class_probabilities && Object.entries(result.class_probabilities).map(([cls, prob]) => {\r\n\t\t\t\t\t\t\t\t\t\tlet percent = 0;\r\n\t\t\t\t\t\t\t\t\t\tif (typeof prob === 'string' || typeof prob === 'number') {\r\n\t\t\t\t\t\t\t\t\t\t\tpercent = (parseFloat(prob) * 100);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t// Always show 2 decimals, do not round up to 100%\r\n\t\t\t\t\t\t\t\t\t\tconst display = `${percent.toFixed(2)}%`;\r\n\t\t\t\t\t\t\t\t\t\treturn <li key={cls}>{cls}: {display}</li>;\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t   </ul>\r\n\t\t\t\t\t\t   </div>\r\n\t\t\t\t\t   </>\r\n\t\t\t\t   ) : (\r\n\t\t\t\t\t   <div style={{ color: \"#666\", fontStyle: \"italic\" }}>\r\n\t\t\t\t\t\t   Upload an image and click \"Analyze\" to see results here.\r\n\t\t\t\t\t   </div>\r\n\t\t\t\t   )}\r\n\t\t\t   </div>\r\n               </div>\r\n\t\t   </div>\r\n\t   );\r\n    }\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///F:/shiii/acm/legion/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,uIACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}}]
}